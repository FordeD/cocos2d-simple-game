window.__require=function e(t,o,r){function i(n,s){if(!o[n]){if(!t[n]){var c=n.split("/");if(c=c[c.length-1],!t[c]){var p="function"==typeof __require&&__require;if(!s&&p)return p(c,!0);if(l)return l(c,!0);throw new Error("Cannot find module '"+n+"'")}n=c}var a=o[n]={exports:{}};t[n][0].call(a.exports,function(e){return i(t[n][1][e]||e)},a,a.exports,e,t,o,r)}return o[n].exports}for(var l="function"==typeof __require&&__require,n=0;n<r.length;n++)i(r[n]);return i}({BoardModel:[function(e,t,o){"use strict";cc._RF.push(t,"fbac2JUZGlOzL08QcE956jd","BoardModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoardModel=void 0;var r=e("../Controller/GameController"),i=e("./TileModel"),l=function(){function e(e,t,o){this.grid=[],this.specialTileChance=0,this.rows=e,this.cols=t,this.specialTileChance=o,this.generate()}return e.prototype.getRandomColor=function(){return Math.floor(Math.random()*r.default.instance.defaultTiles)},e.prototype.generate=function(){for(var e=0;e<this.rows;e++){this.grid[e]=[];for(var t=0;t<this.cols;t++)this.grid[e][t]=this.createTile(e,t)}},e.prototype.createTile=function(e,t){var o=this.getRandomColor(),r=new i.TileModel(e,t,o);return 100*Math.random()<this.specialTileChance&&(r.specialType=this.getRandomSpecialType(),r.color=i.TileColor.Other),r},e.prototype.getTile=function(e,t){return e<0||e>=this.rows||t<0||t>=this.cols?null:this.grid[e][t]},e.prototype.findGroup=function(e,t){var o=this.getTile(e,t);if(!o)return[];for(var r=[o],i=new Set,l=[];r.length;){var n=r.pop();n&&!i.has(n)&&(i.add(n),l.push(n),[this.getTile(n.row-1,n.col),this.getTile(n.row+1,n.col),this.getTile(n.row,n.col-1),this.getTile(n.row,n.col+1)].forEach(function(e){e&&e.color===o.color&&r.push(e)}))}return l},e.prototype.getRandomSpecialType=function(){var e=[i.TileSpecialType.ClearRow,i.TileSpecialType.ClearColumn,i.TileSpecialType.ClearRadius];return e[Math.floor(Math.random()*e.length)]},e.prototype.removeTiles=function(e){var t=this;e.forEach(function(e){t.grid[e.row][e.col]=null})},e.prototype.getAllTiles=function(){return[].concat.apply([],this.grid)},e.prototype.collapseAndFill=function(){for(var e=[],t=0;t<this.cols;t++){for(var o=[],r=this.rows-1;r>=0;r--)(l=this.grid[r][t])&&o.push(l);for(;o.length<this.rows;)(l=this.createTile(-1,t)).isNew=!0,o.push(l);r=this.rows-1;for(var i=0;r>=0;r--,i++){var l;(l=o[i]).row=r,l.col=t,this.grid[r][t]=l,e.push(l)}}return e},e.prototype.isInside=function(e,t){return e>=0&&e<this.rows&&t>=0&&t<this.cols},e}();o.BoardModel=l,cc._RF.pop()},{"../Controller/GameController":"GameController","./TileModel":"TileModel"}],BoardView:[function(e,t,o){"use strict";cc._RF.push(t,"37a73h+rKROCIv7+YUhiTc3","BoardView");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=this&&this.__decorate||function(e,t,o,r){var i,l=arguments.length,n=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(l<3?i(n):l>3?i(t,o,n):i(t,o))||n);return l>3&&n&&Object.defineProperty(t,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Controller/GameController"),s=cc._decorator,c=s.ccclass,p=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tilePrefab=null,t.tileSize=0,t}return i(t,e),t.prototype.onLoad=function(){var e=n.default.instance;this.tileSize=Math.min(this.node.width/e.cols,this.node.height/e.rows)},t.prototype.gridToWorld=function(e,t){var o=-this.node.width/2,r=this.node.height/2;return cc.v3(o+t*this.tileSize+this.tileSize/2,r-e*this.tileSize-this.tileSize/2)},t.prototype.createTile=function(e){var t=cc.instantiate(this.tilePrefab);t.parent=this.node,t.width=this.tileSize,t.height=this.tileSize,t.setPosition(this.gridToWorld(e.row,e.col)),e.viewNode=t,t.getComponent("TileView").init(e)},t.prototype.moveTile=function(e){if(e.viewNode){var t=this.gridToWorld(e.row,e.col);cc.tween(e.viewNode).to(.25,{position:t}).start()}},t.prototype.spawnNewTile=function(e){var t=cc.instantiate(this.tilePrefab);t.parent=this.node,t.width=this.tileSize,t.height=this.tileSize;var o=this.gridToWorld(0,e.col).x,r=this.node.height/2+this.tileSize;t.setPosition(o,r),e.viewNode=t,t.getComponent("TileView").init(e)},l([p({tooltip:"\u041f\u0440\u0435\u0444\u0430\u0431 \u0442\u0430\u0439\u043b-\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",type:cc.Prefab})],t.prototype,"tilePrefab",void 0),l([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{"../Controller/GameController":"GameController"}],GameController:[function(e,t,o){"use strict";cc._RF.push(t,"84ec9puCKdLbbvR+lmmIbfc","GameController");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=this&&this.__decorate||function(e,t,o,r){var i,l=arguments.length,n=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(l<3?i(n):l>3?i(t,o,n):i(t,o))||n);return l>3&&n&&Object.defineProperty(t,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Model/BoardModel"),s=e("../Model/PlayerModel"),c=e("../System/MoveSystem"),p=cc._decorator,a=p.ccclass,u=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rows=8,t.cols=8,t.moves=20,t.targetScore=500,t.defaultTiles=5,t.specialTileChance=5,t.radiusPower=1,t.radiusBoosterPower=5,t.scoreLabel=null,t.moveLabel=null,t.popupBlock=null,t.tileContainerNode=null,t.scoreByTile=5,t.scoreByTileMultipler=1.5,t.rerollLabel=null,t.rerollCount=3,t.bombLabel=null,t.bombCount=3,t.score=0,t.startMoves=0,t.popupView=null,t.boardView=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.instance=this,this.initPlayerState()},t.prototype.start=function(){this.board=new n.BoardModel(this.rows,this.cols,this.specialTileChance),this.boardView=this.tileContainerNode.getComponent("BoardView"),this.popupView=this.popupBlock.getComponent("PopupView"),this.moveSystem=new c.default(this.board,this.radiusBoosterPower);for(var e=0;e<this.rows;e++)for(var t=0;t<this.cols;t++)this.boardView.createTile(this.board.grid[e][t]);this.player.updateLabels()},t.prototype.initPlayerState=function(){this.player=new s.default({moves:this.moves,score:this.score,totalScore:this.targetScore,rerollCount:this.rerollCount,bombCount:this.bombCount},{moves:this.moveLabel,score:this.scoreLabel,reroll:this.rerollLabel,bomb:this.bombLabel},{scoreByTile:this.scoreByTile,scoreByTileMultipler:this.scoreByTileMultipler})},t.prototype.restartGame=function(){var e=this.board.getAllTiles();this.moveSystem.animateAndResolve(e),this.player.restart()},t.prototype.onTileClicked=function(e,t){if(!this.moveSystem.inputLocked&&0!==this.player.getMoves()){var o=this.board.getTile(e,t);if(o){var r=[];if(this.player.checkActiveBooster())r=this.moveSystem.clearRadius(e,t);else if(o.isSpecial())r=this.moveSystem.activateSpecial(o);else{var i=this.board.findGroup(e,t);if(i.length<3)return;r=i}0!==r.length&&(this.moveSystem.inputLocked=!0,this.moveSystem.animateAndResolve(r),this.player.checkActiveBooster()||o.isSpecial()||(this.player.useMove(),this.player.updateScore(r.length)),this.player.deactiveBooster(),this.checkGameWin(),this.checkGameLose())}}},t.prototype.useRerollBooster=function(){if(!this.moveSystem.inputLocked&&!this.player.checkActiveBooster()&&0!==this.player.getReroll()){var e=this.board.getAllTiles();this.moveSystem.animateAndResolve(e),this.player.useReroll()}},t.prototype.useBombBooster=function(){this.moveSystem.inputLocked||this.player.checkActiveBooster()||0!==this.player.getBombs()&&this.player.useBomb()},t.prototype.checkGameWin=function(){var e=this;this.player.isPlayerWin()&&this.popupView.show({message:"\u0412\u044b \u0432\u044b\u0439\u0433\u0440\u0430\u043b\u0438!\n\u0425\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c?",showButton:!0,showClose:!0,onClose:function(){e.popupView.node.active=!1},onButton:function(){e.popupView.node.active=!1,e.restartGame()}})},t.prototype.checkGameLose=function(){var e=this;if(this.player.isPlayerLose()){var t=this.popupBlock.getComponent("PopupView");t.show({message:"\u0423 \u0432\u0430\u0441 \u043d\u0435 \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0445\u043e\u0434\u043e\u0432.\n\u0425\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c?",showButton:!0,showClose:!1,onButton:function(){t.node.active=!1,e.restartGame()}})}},l([u({tooltip:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a \u0432 \u0438\u0433\u0440\u043e\u0432\u043e\u043c \u043f\u043e\u043b\u0435"})],t.prototype,"rows",void 0),l([u({tooltip:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043b\u043e\u043d\u043e\u043a \u0432 \u0438\u0433\u0440\u043e\u0432\u043e\u043c \u043f\u043e\u043b\u0435"})],t.prototype,"cols",void 0),l([u({tooltip:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439"})],t.prototype,"moves",void 0),l([u({tooltip:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0447\u043a\u043e\u0432"})],t.prototype,"targetScore",void 0),l([u({tooltip:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 \u0442\u0430\u0439\u043b\u043e\u0432"})],t.prototype,"defaultTiles",void 0),l([u({tooltip:"\u0428\u0430\u043d\u0441 \u043f\u043e\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043f\u0435\u0446\u0442\u0430\u0439\u043b\u0430 (%)"})],t.prototype,"specialTileChance",void 0),l([u({tooltip:"\u0420\u0430\u0434\u0438\u0443\u0441 \u0432\u0437\u0440\u044b\u0432\u0430 \u0441\u043f\u0435\u0446\u0442\u0430\u0439\u043b\u0430"})],t.prototype,"radiusPower",void 0),l([u({tooltip:"\u0420\u0430\u0434\u0438\u0443\u0441 \u0432\u0437\u0440\u044b\u0432\u0430 \u0431\u0443\u0441\u0442\u0435\u0440\u0430"})],t.prototype,"radiusBoosterPower",void 0),l([u({tooltip:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442-\u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043e\u0447\u043a\u043e\u0432",type:cc.Label})],t.prototype,"scoreLabel",void 0),l([u({tooltip:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442-\u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0445\u043e\u0434\u043e\u0432",type:cc.Label})],t.prototype,"moveLabel",void 0),l([u({tooltip:"\u0411\u043b\u043e\u043a-\u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 Popup",type:cc.Node})],t.prototype,"popupBlock",void 0),l([u({tooltip:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442-\u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u0438\u0433\u0440\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044f",type:cc.Node})],t.prototype,"tileContainerNode",void 0),l([u({tooltip:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0447\u043a\u043e\u0432 \u0437\u0430 \u0442\u0430\u0439\u043b",type:Number})],t.prototype,"scoreByTile",void 0),l([u({tooltip:"\u041c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c \u043e\u0447\u043a\u043e\u0432 \u0437\u0430 \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u0438",type:Number})],t.prototype,"scoreByTileMultipler",void 0),l([u({tooltip:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442-\u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u0438\u0433\u0440\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044f",type:cc.Label})],t.prototype,"rerollLabel",void 0),l([u({tooltip:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u0438\u0433\u0440\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044f",type:Number})],t.prototype,"rerollCount",void 0),l([u({tooltip:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442-\u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0431\u043e\u043c\u0431",type:cc.Label})],t.prototype,"bombLabel",void 0),l([u({tooltip:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0431\u043e\u043c\u0431",type:Number})],t.prototype,"bombCount",void 0),o=l([a],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../Model/BoardModel":"BoardModel","../Model/PlayerModel":"PlayerModel","../System/MoveSystem":"MoveSystem"}],MoveSystem:[function(e,t,o){"use strict";cc._RF.push(t,"eecfeieKfdI4J4udBBgiwhw","MoveSystem");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var l=e("../Controller/GameController"),n=e("../Model/TileModel"),s=function(e){function t(t,o){var r=e.call(this)||this;return r.inputLocked=!1,r.board=t,r.radiusPower=o,r.boardView=l.default.instance.boardView,r}return i(t,e),t.prototype.processClick=function(e){return e.isSpecial()?this.activateSpecial(e):this.collectGroup(e)},t.prototype.collectGroup=function(e){return this.board.findGroup(e.row,e.col)},t.prototype.activateSpecial=function(e){switch(e.specialType){case n.TileSpecialType.ClearRow:return this.clearRow(e.row);case n.TileSpecialType.ClearColumn:return this.clearColumn(e.col);case n.TileSpecialType.ClearRadius:return this.clearRadius(e.row,e.col);default:return[]}},t.prototype.useBombBooster=function(){},t.prototype.clearRow=function(e){for(var t=[],o=0;o<this.board.cols;o++){var r=this.board.grid[e][o];r&&t.push(r)}return t},t.prototype.clearColumn=function(e){for(var t=[],o=0;o<this.board.rows;o++){var r=this.board.grid[o][e];r&&t.push(r)}return t},t.prototype.clearRadius=function(e,t){for(var o=[],r=e-this.radiusPower;r<=e+this.radiusPower;r++)for(var i=t-this.radiusPower;i<=t+this.radiusPower;i++)if(this.board.isInside(r,i)){var l=this.board.grid[r][i];l&&o.push(l)}return o},t.prototype.animateAndResolve=function(e){var t=this;Promise.all(e.map(function(e){return new Promise(function(t){e.viewNode&&e.viewNode.isValid?cc.tween(e.viewNode).to(.2,{scale:0}).call(function(){e.viewNode&&e.viewNode.isValid&&(e.viewNode.destroy(),e.viewNode=null),t()}).start():t()})})).then(function(){t.board.removeTiles(e);var o=t.board.collapseAndFill(),r=[],i=[];o.forEach(function(e){e.isNew?i.push(e):r.push(e)}),r.forEach(function(e){t.boardView.moveTile(e)}),t.scheduleOnce(function(){i.forEach(function(e){t.boardView.spawnNewTile(e),e.isNew=!1,t.boardView.moveTile(e)}),t.inputLocked=!1},.4)})},t}(cc.Component);o.default=s,cc._RF.pop()},{"../Controller/GameController":"GameController","../Model/TileModel":"TileModel"}],PlayerModel:[function(e,t,o){"use strict";cc._RF.push(t,"591e8y4/UND+r/Xo/5EsNfQ","PlayerModel");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=this&&this.__decorate||function(e,t,o,r){var i,l=arguments.length,n=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(l<3?i(n):l>3?i(t,o,n):i(t,o))||n);return l>3&&n&&Object.defineProperty(t,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.ccclass,s=function(e){function t(t,o,r){var i=e.call(this)||this;return i.totalMoves=0,i.currentMoves=0,i.totalScore=0,i.currentScore=0,i.rerollCountTotal=0,i.rerollCount=0,i.bombCountTotal=0,i.bombCount=0,i.movesLabel=null,i.scoreLabel=null,i.rerollLabel=null,i.bombLabel=null,i.scoreByTile=0,i.scoreByTileMultipler=1,i.isActiveBombBooster=!1,i.totalMoves=t.moves,i.currentMoves=t.moves,i.totalScore=t.totalScore,i.currentScore=t.score,i.rerollCount=t.rerollCount,i.rerollCountTotal=t.rerollCount,i.bombCount=t.bombCount,i.bombCountTotal=t.bombCount,i.movesLabel=o.moves,i.scoreLabel=o.score,i.rerollLabel=o.reroll,i.bombLabel=o.bomb,i.scoreByTile=r.scoreByTile,i.scoreByTileMultipler=r.scoreByTileMultipler,i}return i(t,e),t.prototype.updateLabels=function(){this.movesLabel.string=""+this.currentMoves,this.scoreLabel.string=this.currentScore+"/"+this.totalScore,this.rerollLabel.string=""+this.rerollCount,this.bombLabel.string=""+this.bombCount},t.prototype.isPlayerWin=function(){return this.currentScore>=this.totalScore},t.prototype.isPlayerLose=function(){return!this.isPlayerWin()&&0===this.currentMoves},t.prototype.useMove=function(){return this.currentMoves<=0?0:(this.currentMoves--,this.updateLabels(),this.currentMoves)},t.prototype.getMoves=function(){return this.currentMoves},t.prototype.getBombs=function(){return this.bombCount},t.prototype.getReroll=function(){return this.rerollCount},t.prototype.checkActiveBooster=function(){return this.isActiveBombBooster},t.prototype.deactiveBooster=function(){this.isActiveBombBooster=!1},t.prototype.useBomb=function(){return this.bombCount<=0?0:(this.bombCount--,this.updateLabels(),this.isActiveBombBooster=!0,this.bombCount)},t.prototype.useReroll=function(){return this.rerollCount<=0?0:(this.rerollCount--,this.updateLabels(),this.rerollCount)},t.prototype.updateScore=function(e){this.currentScore+=Math.round(e*this.scoreByTile*this.scoreByTileMultipler),this.updateLabels()},t.prototype.restart=function(){this.currentMoves=this.totalMoves,this.currentScore=0,this.bombCount=this.bombCountTotal,this.rerollCount=this.rerollCountTotal,this.updateLabels()},l([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],PopupView:[function(e,t,o){"use strict";cc._RF.push(t,"a51809Y1lZAZ4TMU2W2EpEg","PopupView");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=this&&this.__decorate||function(e,t,o,r){var i,l=arguments.length,n=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(l<3?i(n):l>3?i(t,o,n):i(t,o))||n);return l>3&&n&&Object.defineProperty(t,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.node.active=!1},t.prototype.show=function(e){this.node.active=!0,this.messageLabel.string=e.message,this.buttonBlock.active=!!e.showButton,this.buttonCloseBlock.active=!!e.showClose,this.onButton=e.onButton,this.onClose=e.onClose,this.playShowAnimation()},t.prototype.hide=function(){var e=this;this.playHideAnimation(function(){e.node.active=!1})},t.prototype.onButtonClicked=function(){var e;null===(e=this.onButton)||void 0===e||e.call(this),this.hide()},t.prototype.onCloseClicked=function(){var e;null===(e=this.onClose)||void 0===e||e.call(this),this.hide()},t.prototype.playShowAnimation=function(){this.node.scale=.8,this.node.opacity=0,cc.tween(this.node).to(.2,{scale:1,opacity:255}).start()},t.prototype.playHideAnimation=function(e){cc.tween(this.node).to(.15,{scale:.8,opacity:0}).call(e).start()},l([c({tooltip:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u0442\u0435\u043a\u0441\u0442\u0430 \u043e\u043a\u043d\u0430 Popup",type:cc.Label})],t.prototype,"messageLabel",void 0),l([c({tooltip:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u043a\u043d\u043e\u043f\u043a\u0438 \u043e\u043a\u043d\u0430 Popup",type:cc.Node,name:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u043a\u043d\u043e\u043f\u043a\u0438 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u0430"})],t.prototype,"buttonBlock",void 0),l([c({tooltip:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u043a\u043d\u043e\u043f\u043a\u0438 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f \u043e\u043a\u043d\u0430 Popup",type:cc.Node,name:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u043a\u043d\u043e\u043f\u043a\u0438 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f"})],t.prototype,"buttonCloseBlock",void 0),l([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],TileModel:[function(e,t,o){"use strict";var r;cc._RF.push(t,"0b7ccEVnu9IjrQx6KAJPdEK","TileModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.TileModel=o.TileSpecialType=o.TileColor=void 0,function(e){e[e.Red=0]="Red",e[e.Blue=1]="Blue",e[e.Green=2]="Green",e[e.Yellow=3]="Yellow",e[e.Purple=4]="Purple",e[e.Other=5]="Other"}(o.TileColor||(o.TileColor={})),function(e){e[e.None=0]="None",e[e.ClearRow=1]="ClearRow",e[e.ClearColumn=2]="ClearColumn",e[e.ClearRadius=3]="ClearRadius"}(r=o.TileSpecialType||(o.TileSpecialType={}));var i=function(){function e(e,t,o){this.isNew=!1,this.specialType=r.None,this.viewNode=null,this.row=e,this.col=t,this.color=o}return e.prototype.isSpecial=function(){return this.specialType!==r.None},e}();o.TileModel=i,cc._RF.pop()},{}],TileView:[function(e,t,o){"use strict";cc._RF.push(t,"8ce0dbtUjFGza2XK1UUQQR1","TileView");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=this&&this.__decorate||function(e,t,o,r){var i,l=arguments.length,n=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(l<3?i(n):l>3?i(t,o,n):i(t,o))||n);return l>3&&n&&Object.defineProperty(t,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Controller/GameController"),s=e("../Model/TileModel"),c=cc._decorator,p=c.ccclass,a=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.tileSprites=[],t.rowSpecialSprite=null,t.columnSpecialSprite=null,t.radiusSpecialSprite=null,t}return i(t,e),t.prototype.init=function(e){this.model=e,e.isSpecial()?this.applySpecialVisual(e.specialType):this.sprite.spriteFrame=this.tileSprites[e.color]},t.prototype.applySpecialVisual=function(e){switch(e){case s.TileSpecialType.ClearRow:this.sprite.spriteFrame=this.rowSpecialSprite;break;case s.TileSpecialType.ClearColumn:this.sprite.spriteFrame=this.columnSpecialSprite;break;case s.TileSpecialType.ClearRadius:this.sprite.spriteFrame=this.radiusSpecialSprite}},t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.onClick=function(){n.default.instance.onTileClicked(this.model.row,this.model.col)},l([a({tooltip:"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0434\u043b\u044f \u043b\u043e\u0433\u0438\u043a\u0438",type:cc.Sprite})],t.prototype,"sprite",void 0),l([a({tooltip:"\u041c\u0430\u0441\u0441\u0438\u0432 \u0441\u043f\u0440\u0430\u0439\u0442\u043e\u0432 \u0432\u0441\u0435\u0445 \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u0442\u0430\u0439\u043b\u043e\u0432",type:[cc.SpriteFrame]})],t.prototype,"tileSprites",void 0),l([a({tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0442\u0430\u0439\u043b\u0430 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0440\u043e\u043a\u0438 \u0442\u0430\u0439\u043b\u043e\u0432",type:cc.SpriteFrame})],t.prototype,"rowSpecialSprite",void 0),l([a({tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0442\u0430\u0439\u043b\u0430 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043b\u043e\u043d\u043a\u0438 \u0442\u0430\u0439\u043b\u043e\u0432",type:cc.SpriteFrame})],t.prototype,"columnSpecialSprite",void 0),l([a({tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0442\u0430\u0439\u043b\u0430 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u0430\u0439\u043b\u043e\u0432 \u043f\u043e \u0440\u0430\u0434\u0438\u0443\u0441\u0443",type:cc.SpriteFrame})],t.prototype,"radiusSpecialSprite",void 0),l([p],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Controller/GameController":"GameController","../Model/TileModel":"TileModel"}]},{},["GameController","BoardModel","PlayerModel","TileModel","MoveSystem","BoardView","PopupView","TileView"]);